local lp = game.Players.LocalPlayer
local char = lp.Character or lp.CharacterAdded:Wait()
local hum = char:WaitForChild("Humanoid")
local hrp = char:WaitForChild("HumanoidRootPart")

-- GUI Setup
local gui = Instance.new("ScreenGui", lp:WaitForChild("PlayerGui"))
gui.Name = "CheaterGUI"
gui.ResetOnSpawn = false

local mainFrame = Instance.new("Frame", gui)
mainFrame.Size = UDim2.new(0, 250, 0, 200)
mainFrame.Position = UDim2.new(0, 50, 0, 50)
mainFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = true

local title = Instance.new("TextLabel", mainFrame)
title.Size = UDim2.new(1, 0, 0, 40)
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
title.Text = "Nhím"
title.TextColor3 = Color3.new(1, 1, 1)
title.Font = Enum.Font.SourceSansBold
title.TextSize = 24

local function createButton(name, posY, callback)
    local btn = Instance.new("TextButton", mainFrame)
    btn.Size = UDim2.new(0, 200, 0, 30)
    btn.Position = UDim2.new(0, 25, 0, posY)
    btn.BackgroundColor3 = Color3.fromRGB(60, 180, 75)
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.Font = Enum.Font.SourceSansBold
    btn.TextSize = 18
    btn.Text = "Bật " .. name
    local enabled = false
    btn.MouseButton1Click:Connect(function()
        enabled = not enabled
        btn.Text = (enabled and "Tắt " or "Bật ") .. name
        btn.BackgroundColor3 = enabled and Color3.fromRGB(200, 50, 50) or Color3.fromRGB(60, 180, 75)
        callback(enabled)
    end)
end

-- Trạng thái chức năng
local autoHeal = false
local resetSpeed = false
local invisibilityEnabled = false

createButton("Tự Hồi Máu", 50, function(on)
	autoHeal = on
end)

createButton("Chỉnh Speed", 90, function(on)
	resetSpeed = on
end)

createButton("Tàng Hình", 130, function(on)
	invisibilityEnabled = on
end)

-- Theo dõi nhân vật mới
lp.CharacterAdded:Connect(function(newChar)
    char = newChar
    hum = char:WaitForChild("Humanoid")
    hrp = char:WaitForChild("HumanoidRootPart")
end)

-- Vòng lặp chính
game:GetService("RunService").Heartbeat:Connect(function()
	if not char or not hum or not hrp then return end

	-- Auto Heal
	if autoHeal then
		if hum.Health < hum.MaxHealth then
			hum.Health = hum.MaxHealth
		end
	end

	-- Reset Speed
	if resetSpeed then
		if hum.WalkSpeed ~= 16 then
			hum.WalkSpeed = 100
		end
	end

	-- Invisibility
	if invisibilityEnabled then
		for _, part in pairs(char:GetDescendants()) do
			if part:IsA("BasePart") and part.LocalTransparencyModifier ~= 1 then
				part.LocalTransparencyModifier = 1
			end
		end
	end
end)
