-- Tải OrionLib
local OrionLib = loadstring(game:HttpGet("https://raw.githubusercontent.com/shlexware/Orion/main/source"))()

-- Lấy thông tin người chơi và nhân vật
local lp = game.Players.LocalPlayer
local char = lp.Character or lp.CharacterAdded:Wait()
local hum = char:WaitForChild("Humanoid")
local hrp = char:WaitForChild("HumanoidRootPart")

-- Trạng thái các tính năng
local autoHeal = false
local resetSpeed = false
local invisibilityEnabled = false
local alreadyInvisible = false

-- Tạo GUI OrionLib
local Window = OrionLib:MakeWindow({
    Name = "Dead Rails-hub | By: Minh",
    HidePremium = false,
    SaveConfig = false,
    ConfigFolder = "DeadRailsHub"
})

local MainTab = Window:MakeTab({
    Name = "Chức Năng",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

-- Nút: Tự hồi máu
MainTab:AddToggle({
    Name = "Tự Hồi Máu",
    Default = false,
    Callback = function(state)
        autoHeal = state
    end
})

-- Nút: Tăng tốc độ
MainTab:AddToggle({
    Name = "Chỉnh Speed (100)",
    Default = false,
    Callback = function(state)
        resetSpeed = state
    end
})

-- Nút: Tàng hình
MainTab:AddToggle({
    Name = "Tàng Hình",
    Default = false,
    Callback = function(state)
        invisibilityEnabled = state
    end
})

-- Theo dõi nhân vật mới khi reset
lp.CharacterAdded:Connect(function(newChar)
    char = newChar
    hum = char:WaitForChild("Humanoid")
    hrp = char:WaitForChild("HumanoidRootPart")
    alreadyInvisible = false
end)

-- Vòng lặp chính
game:GetService("RunService").Heartbeat:Connect(function()
    if not char or not hum or not hrp then return end

    -- Tự hồi máu
    if autoHeal and hum.Health < hum.MaxHealth then
        hum.Health = hum.MaxHealth
    end

    -- Reset Speed
	if resetSpeed then
		if hum.WalkSpeed ~= 16 then
			hum.WalkSpeed = 100
		end
	end

    -- Tàng hình
    if invisibilityEnabled and not alreadyInvisible then
        for _, part in pairs(char:GetDescendants()) do
            if part:IsA("BasePart") then
                part.LocalTransparencyModifier = 1
            end
        end
        alreadyInvisible = true
    elseif not invisibilityEnabled and alreadyInvisible then
        for _, part in pairs(char:GetDescendants()) do
            if part:IsA("BasePart") then
                part.LocalTransparencyModifier = 0
            end
        end
        alreadyInvisible = false
    end
end)

-- Khởi động GUI
OrionLib:Init()
